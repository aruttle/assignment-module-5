{% extends "base.html" %}
{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="mb-0">{{ project.name }}</h1>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-primary" href="{% url 'projects:project_edit' pk=project.pk %}">Edit</a>
      <a class="btn btn-outline-danger" href="{% url 'projects:project_delete' pk=project.pk %}">Delete</a>
    </div>
  </div>

  <div class="mb-3">
    {% if project.status == 'PLANNED' %}
      <span class="badge bg-secondary">Planned</span>
    {% elif project.status == 'IN_PROGRESS' %}
      <span class="badge bg-primary">In Progress</span>
    {% elif project.status == 'ON_HOLD' %}
      <span class="badge bg-warning text-dark">On Hold</span>
    {% elif project.status == 'COMPLETED' %}
      <span class="badge bg-success">Completed</span>
    {% elif project.status == 'CANCELLED' %}
      <span class="badge bg-dark">Cancelled</span>
    {% endif %}
  </div>

  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Description</h5>
          <p class="mb-0">{{ project.description|linebreaksbr|default:"No description provided." }}</p>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Dates</h5>
          <div><strong>Start:</strong> {{ project.start_date|default:"—" }}</div>
          <div><strong>End:</strong> {{ project.end_date|default:"—" }}</div>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Stakeholders</h5>
          {% if project.stakeholders.all %}
            <ul class="mb-0">
              {% for user in project.stakeholders.all %}
                <li>{{ user.full_name|default:user.email }}</li>
              {% empty %}
                <li class="text-muted">None assigned</li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="text-muted">None assigned</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <a href="{% url 'projects:project_list' %}" class="btn btn-secondary">Back to list</a>
  </div>
</div>
{% endblock %}
