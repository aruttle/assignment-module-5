{% extends 'base.html' %}
{% load static %}
  <!-- <link rel="stylesheet" href="{% static 'css/accommodation.css' %}" -->

{% block content %}
  <div class="container accommodation-detail">

  <!-- Accommodation Title -->
  <h1 class="accommodation-title">{{ accommodation.name }}</h1>

  <!-- Image -->
  {% if accommodation.image %}
    <img src="{{ accommodation.image.url }}" alt="{{ accommodation.name }}" class="accommodation-image">
  {% endif %}

  <!-- Description -->
  <div class="accommodation-description">
    <p>{{ accommodation.description }}</p>
  </div>

  <!-- Booking Form -->
  <div class="booking-form-section">
    <h2>Book this accommodation</h2>
    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-primary">Book Now</button>
    </form>
  </div>

</div>

<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const bookedRanges = {{ booked_ranges_json|safe }};

    const disableRanges = bookedRanges.map(range => ({
      from: range.start,
      to: range.end
    }));

    flatpickr("input[name='check_in']", {
      dateFormat: "Y-m-d",
      disable: disableRanges,
      minDate: "today"
    });

    flatpickr("input[name='check_out']", {
      dateFormat: "Y-m-d",
      disable: disableRanges,
      minDate: "today"
    });
  });
</script>


{% endblock %}

