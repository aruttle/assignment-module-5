{% extends 'base.html' %}
{% load static %}

{% block title %}{{ accommodation.name }} | Glamping Portal{% endblock %}

{% block content %}
<div class="accommodation-detail container mt-4">
  <h2 class="mb-2">{{ accommodation.name }}</h2>
  {% if accommodation.price_per_night %}
    <p class="text-muted">From â‚¬{{ accommodation.price_per_night|floatformat:2 }} / night</p>
  {% endif %}

  <p>{{ accommodation.description }}</p>

  {% if accommodation.image_landscape %}
    <img
      src="{{ accommodation.image_landscape.url }}"
      alt="{{ accommodation.name }}"
      class="img-fluid rounded shadow mb-4"
      loading="lazy">
  {% else %}
    <img
      src="{% static 'images/accommodations/default.jpg' %}"
      alt="Default image"
      class="img-fluid rounded shadow mb-4"
      loading="lazy">
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.non_field_errors }}
    {{ form.as_p }}
    <button type="submit" class="btn btn-success">Book Now</button>
  </form>
</div>
{% endblock %}

{# IMPORTANT: base.html uses block "page_scripts" (not "scripts") #}
{% block page_scripts %}
  <!-- Provide the data; base.html already includes flatpickr-init.js after this block -->
  <script id="booked-ranges-data" type="application/json">
    {{ booked_ranges_json|safe }}
  </script>
{% endblock %}
