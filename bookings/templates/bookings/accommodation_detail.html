{% extends 'base.html' %}
{% load static %}

{% block title %}{{ accommodation.name }} | Glamping Portal{% endblock %}

{% block content %}
<div class="accommodation-detail container mt-4">
  <h2 class="mb-2">{{ accommodation.name }}</h2>
  {% if accommodation.price_per_night %}
    <p class="text-muted">From €{{ accommodation.price_per_night|floatformat:2 }} / night</p>
  {% endif %}

  <p>{{ accommodation.description }}</p>

  {% if accommodation.image_landscape %}
    <img
      src="{{ accommodation.image_landscape.url }}"
      alt="{{ accommodation.name }}"
      class="img-fluid rounded shadow mb-4"
      loading="lazy">
  {% else %}
    <img
      src="{% static 'images/accommodations/default.jpg' %}"
      alt="Default image"
      class="img-fluid rounded shadow mb-4"
      loading="lazy">
  {% endif %}

  <div class="d-flex gap-2">
    <a class="btn btn-success"
       href="{% url 'bookings:booking_request' %}?accommodation={{ accommodation.id }}">
      Book Now
    </a>
    <a class="btn btn-outline-secondary" href="{% url 'bookings:accommodation_list' %}">
      Back to Accommodations
    </a>
  </div>
</div>
{% endblock %}

{# IMPORTANT: base.html uses block "page_scripts" (not "scripts") #}
{% block page_scripts %}
  <!-- Keeping this block is safe; it won’t break anything if unused -->
  <script id="booked-ranges-data" type="application/json">
    {{ booked_ranges_json|safe }}
  </script>
{% endblock %}
