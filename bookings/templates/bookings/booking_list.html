{% extends "base.html" %}
{% block title %}Your Bookings{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-3">Your Bookings</h1>

  {% if bookings %}
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>Accommodation</th>
            <th>Check-in</th>
            <th>Check-out</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for b in bookings %}
            <tr>
              <td>
                {% if b.accommodation %}
                  <a href="{% url 'bookings:accommodation_detail' b.accommodation.pk %}">
                    {{ b.accommodation.name }}
                  </a>
                {% else %}
                  (n/a)
                {% endif %}
              </td>
              <td>{{ b.check_in|date:"Y-m-d" }}</td>
              <td>{{ b.check_out|date:"Y-m-d" }}</td>
              <td class="text-end">
                <a class="btn btn-sm btn-outline-primary" href="{% url 'bookings:booking_edit' b.pk %}">Edit</a>
                <a class="btn btn-sm btn-outline-danger" href="{% url 'bookings:booking_delete' b.pk %}">Delete</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <ul>
      <li>No bookings yet.</li>
    </ul>
  {% endif %}

  <div class="mt-3 d-flex flex-wrap gap-2">
    {% if 'bookings:booking_request' in request.resolver_match.namespace %}
    {% endif %}
    <a class="btn btn-primary" href="{% url 'bookings:booking_request' %}">Request a booking</a>
    <a class="btn btn-outline-primary" href="{% url 'bookings:booking_create' %}">Make a new booking</a>
    <a class="btn btn-outline-secondary" href="{% url 'bookings:accommodation_list' %}">Browse accommodations</a>
  </div>
</div>
{% endblock %}
