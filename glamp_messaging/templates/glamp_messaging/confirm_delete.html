{% extends "base.html" %}
{% block title %}Delete Message{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-3">Delete message</h1>

  <div class="alert alert-warning">
    <p class="mb-2">
      Are you sure you want to delete this message?
    </p>
    <ul class="mb-0">
      <li><strong>Subject:</strong> {{ msg.subject|default:"(no subject)" }}</li>
      <li><strong>From:</strong>
        {% if msg.sender.full_name %}{{ msg.sender.full_name }}{% else %}{{ msg.sender.email }}{% endif %}
      </li>
      <li><strong>To:</strong>
        {% if msg.recipient.full_name %}{{ msg.recipient.full_name }}{% else %}{{ msg.recipient.email }}{% endif %}
      </li>
      <li><strong>Sent:</strong> {{ msg.sent_at|date:"Y-m-d H:i" }}</li>
    </ul>
  </div>

  {% if msg.body %}
    <div class="mb-3">
      <div class="small text-muted mb-1">Preview:</div>
      <div class="border rounded p-3 bg-light" style="white-space:pre-wrap">{{ msg.body|truncatechars:500 }}</div>
    </div>
  {% endif %}

  <form method="post" class="d-flex gap-2">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Yes, delete</button>
    <a href="{% url 'glamp_messaging:inbox' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>
{% endblock %}
