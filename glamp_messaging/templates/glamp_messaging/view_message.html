{% extends "base.html" %}

{% block title %}Message: {{ message_obj.subject|default:"(No subject)" }}{% endblock %}

{% block content %}
<div class="container">
  <p><a href="{% url 'glamp_messaging:inbox' %}" class="btn btn-link p-0">&larr; Back to inbox</a></p>

  <div class="card shadow-sm">
    <div class="card-header">
      <strong>{{ message_obj.subject|default:"(No subject)" }}</strong>
      <span class="text-muted float-end">
        {{ message_obj.sent_at|date:"Y-m-d H:i" }}
      </span>
    </div>
    <div class="card-body">
      <p class="mb-1"><strong>From:</strong>
        {{ message_obj.sender.get_full_name|default:message_obj.sender.username|default:message_obj.sender.email }}
      </p>
      <p class="mb-3"><strong>To:</strong>
        {{ message_obj.recipient.get_full_name|default:message_obj.recipient.username|default:message_obj.recipient.email }}
      </p>
      <hr>
      <div style="white-space: pre-wrap;">
        {# Support either "body" or "content" fields #}
        {{ message_obj.body|default:message_obj.content }}
      </div>
    </div>
  </div>
</div>
{% endblock %}
